<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Briyani Express - Food Delivery</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: #f8f9fa;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            background: linear-gradient(135deg, #ff7e5f, #feb47b);
            color: white;
            padding: 20px 0;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            border-radius: 0 0 15px 15px;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo i {
            font-size: 2.5rem;
        }

        .logo h1 {
            font-size: 2rem;
            font-weight: 800;
        }

        .nav-buttons button {
            background-color: rgba(255, 255, 255, 0.2);
            border: 2px solid white;
            color: white;
            padding: 10px 20px;
            border-radius: 30px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            margin-left: 10px;
        }

        .nav-buttons button:hover {
            background-color: white;
            color: #ff7e5f;
        }

        .main-content {
            display: flex;
            flex-wrap: wrap;
            gap: 30px;
            margin-top: 30px;
        }

        .order-form-container, .admin-container {
            flex: 1;
            min-width: 300px;
            background-color: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.08);
        }

        .orders-container {
            flex: 1;
            min-width: 300px;
            background-color: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.08);
        }

        .section-title {
            color: #ff7e5f;
            border-bottom: 2px solid #feb47b;
            padding-bottom: 10px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #555;
        }

        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e1e5eb;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
            border-color: #ff7e5f;
            outline: none;
        }

        .food-options {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 10px;
        }

        .food-option {
            flex: 1;
            min-width: 150px;
            border: 2px solid #e1e5eb;
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .food-option:hover {
            border-color: #ff7e5f;
            transform: translateY(-3px);
        }

        .food-option.selected {
            border-color: #ff7e5f;
            background-color: rgba(255, 126, 95, 0.05);
        }

        .food-option h4 {
            color: #ff7e5f;
            margin-bottom: 5px;
        }

        .price {
            font-weight: bold;
            color: #333;
            font-size: 1.1rem;
        }

        .juice-option {
            background-color: #f0f8ff;
        }

        .submit-btn {
            background: linear-gradient(135deg, #ff7e5f, #feb47b);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 30px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            transition: all 0.3s;
            margin-top: 10px;
        }

        .submit-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(255, 126, 95, 0.3);
        }

        .order-item {
            background-color: #f9f9f9;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 15px;
            border-left: 5px solid #ff7e5f;
            transition: all 0.3s;
        }

        .order-item:hover {
            transform: translateX(5px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
        }

        .order-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .customer-name {
            font-weight: 700;
            color: #ff7e5f;
            font-size: 1.2rem;
        }

        .order-time {
            font-size: 0.9rem;
            color: #777;
        }

        .order-details {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
        }

        .order-food {
            font-weight: 600;
        }

        .order-price {
            font-weight: 700;
            color: #333;
        }

        .order-contact {
            display: flex;
            justify-content: space-between;
            color: #555;
            font-size: 0.95rem;
            border-top: 1px dashed #ddd;
            padding-top: 10px;
            margin-top: 10px;
        }

        .admin-login {
            background-color: #f0f8ff;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 25px;
        }

        .hidden {
            display: none;
        }

        .admin-controls {
            margin-top: 20px;
        }

        .admin-controls button {
            background-color: #4a6fa5;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            margin-right: 10px;
            font-weight: 600;
            transition: all 0.3s;
        }

        .admin-controls button:hover {
            background-color: #385d8a;
        }

        .stats {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
            background: linear-gradient(135deg, #4a6fa5, #6b93d6);
            color: white;
            padding: 20px;
            border-radius: 10px;
        }

        .stat-item {
            text-align: center;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: 700;
        }

        .stat-label {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        footer {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #e1e5eb;
            color: #777;
            font-size: 0.9rem;
        }

        @media (max-width: 768px) {
            .main-content {
                flex-direction: column;
            }
            
            .header-content {
                flex-direction: column;
                gap: 20px;
            }
            
            .nav-buttons {
                display: flex;
                width: 100%;
                justify-content: space-between;
            }
            
            .nav-buttons button {
                flex: 1;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-utensils"></i>
                    <h1>Briyani Express</h1>
                </div>
                <div class="nav-buttons">
                    <button id="customerViewBtn">
                        <i class="fas fa-user"></i> Customer View
                    </button>
                    <button id="adminViewBtn">
                        <i class="fas fa-lock"></i> Admin View
                    </button>
                </div>
            </div>
        </div>
    </header>

    <div class="container">
        <!-- Customer View -->
        <div id="customerView" class="main-content">
            <div class="order-form-container">
                <h2 class="section-title">
                    <i class="fas fa-shopping-cart"></i> Place Your Order
                </h2>
                <form id="orderForm">
                    <div class="form-group">
                        <label for="firstName">First Name</label>
                        <input type="text" id="firstName" placeholder="Enter your first name" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="lastName">Last Name</label>
                        <input type="text" id="lastName" placeholder="Enter your last name" required>
                    </div>
                    
                    <div class="form-group">
                        <label>Select Your Food</label>
                        <div class="food-options">
                            <div class="food-option" data-food="Biriani Nyama" data-price="7000">
                                <h4>Biriani Nyama</h4>
                                <p class="price">TZS 7,000/=</p>
                                <p>Beef Biryani with spices</p>
                            </div>
                            <div class="food-option" data-food="Biriani Kuku" data-price="8000">
                                <h4>Biriani Kuku</h4>
                                <p class="price">TZS 8,000/=</p>
                                <p>Chicken Biryani with spices</p>
                            </div>
                            <div class="food-option juice-option" data-food="Juice" data-price="1500">
                                <h4>Juice</h4>
                                <p class="price">TZS 1,500/=</p>
                                <p>Fresh fruit juice</p>
                            </div>
                        </div>
                        <input type="hidden" id="foodType" required>
                        <input type="hidden" id="foodPrice">
                    </div>
                    
                    <div class="form-group">
                        <label for="phone">Phone Number</label>
                        <input type="tel" id="phone" placeholder="Enter your phone number" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="address">Delivery Address</label>
                        <textarea id="address" rows="3" placeholder="Enter your delivery address" required></textarea>
                    </div>
                    
                    <button type="submit" class="submit-btn">
                        <i class="fas fa-paper-plane"></i> Place Order
                    </button>
                </form>
            </div>
            
            <div class="orders-container">
                <h2 class="section-title">
                    <i class="fas fa-list-alt"></i> Recent Orders
                </h2>
                <div id="ordersList">
                    <!-- Orders will be displayed here -->
                    <p class="no-orders">No orders placed yet. Be the first to order!</p>
                </div>
            </div>
        </div>
        
        <!-- Admin View -->
        <div id="adminView" class="admin-container hidden">
            <h2 class="section-title">
                <i class="fas fa-user-shield"></i> Admin Dashboard
            </h2>
            
            <div class="admin-login" id="adminLoginForm">
                <h3>Admin Authentication Required</h3>
                <div class="form-group">
                    <label for="adminPassword">Password</label>
                    <input type="password" id="adminPassword" placeholder="Enter admin password" required>
                </div>
                <button id="loginAdminBtn" class="submit-btn">Login as Admin</button>
                <p class="hint">Hint: The password is "admin123"</p>
            </div>
            
            <div id="adminDashboard" class="hidden">
                <div class="stats">
                    <div class="stat-item">
                        <div class="stat-value" id="totalOrders">0</div>
                        <div class="stat-label">Total Orders</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="totalRevenue">0</div>
                        <div class="stat-label">Total Revenue (TZS)</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="pendingOrders">0</div>
                        <div class="stat-label">Pending Orders</div>
                    </div>
                </div>
                
                <div class="admin-controls">
                    <button id="refreshOrdersBtn">
                        <i class="fas fa-sync-alt"></i> Refresh Orders
                    </button>
                    <button id="clearAllOrdersBtn">
                        <i class="fas fa-trash-alt"></i> Clear All Orders
                    </button>
                    <button id="exportOrdersBtn">
                        <i class="fas fa-file-export"></i> Export Orders
                    </button>
                </div>
                
                <h3 class="section-title" style="margin-top: 30px;">
                    <i class="fas fa-clipboard-list"></i> All Orders
                </h3>
                <div id="adminOrdersList">
                    <!-- Admin orders list will be displayed here -->
                    <p class="no-orders">No orders available.</p>
                </div>
            </div>
        </div>
    </div>

    <footer>
        <div class="container">
            <p>Briyani Express &copy; 2026 | Delicious Food Delivered to Your Doorstep</p>
            <p><i class="fas fa-phone"></i> Call us: +255 677933609|0614503595|0692115390
        </div>
    </footer>

    <script>
        // DOM Elements
        const customerView = document.getElementById('customerView');
        const adminView = document.getElementById('adminView');
        const customerViewBtn = document.getElementById('customerViewBtn');
        const adminViewBtn = document.getElementById('adminViewBtn');
        const orderForm = document.getElementById('orderForm');
        const ordersList = document.getElementById('ordersList');
        const adminOrdersList = document.getElementById('adminOrdersList');
        const adminLoginForm = document.getElementById('adminLoginForm');
        const adminDashboard = document.getElementById('adminDashboard');
        const loginAdminBtn = document.getElementById('loginAdminBtn');
        const refreshOrdersBtn = document.getElementById('refreshOrdersBtn');
        const clearAllOrdersBtn = document.getElementById('clearAllOrdersBtn');
        const exportOrdersBtn = document.getElementById('exportOrdersBtn');
        const foodOptions = document.querySelectorAll('.food-option');
        const foodTypeInput = document.getElementById('foodType');
        const foodPriceInput = document.getElementById('foodPrice');
        const totalOrdersEl = document.getElementById('totalOrders');
        const totalRevenueEl = document.getElementById('totalRevenue');
        const pendingOrdersEl = document.getElementById('pendingOrders');
        
        // Initialize orders array from localStorage or empty array
        let orders = JSON.parse(localStorage.getItem('briyaniOrders')) || [];
        
        // Set up event listeners for view switching
        customerViewBtn.addEventListener('click', () => {
            customerView.classList.remove('hidden');
            adminView.classList.add('hidden');
            customerViewBtn.style.backgroundColor = 'white';
            customerViewBtn.style.color = '#ff7e5f';
            adminViewBtn.style.backgroundColor = 'rgba(255, 255, 255, 0.2)';
            adminViewBtn.style.color = 'white';
            loadOrders();
        });
        
        adminViewBtn.addEventListener('click', () => {
            customerView.classList.add('hidden');
            adminView.classList.remove('hidden');
            adminViewBtn.style.backgroundColor = 'white';
            adminViewBtn.style.color = '#ff7e5f';
            customerViewBtn.style.backgroundColor = 'rgba(255, 255, 255, 0.2)';
            customerViewBtn.style.color = 'white';
            
            // Hide admin dashboard until login
            adminLoginForm.classList.remove('hidden');
            adminDashboard.classList.add('hidden');
        });
        
        // Set up food selection
        foodOptions.forEach(option => {
            option.addEventListener('click', () => {
                // Remove selected class from all options
                foodOptions.forEach(opt => opt.classList.remove('selected'));
                // Add selected class to clicked option
                option.classList.add('selected');
                // Set hidden inputs
                foodTypeInput.value = option.getAttribute('data-food');
                foodPriceInput.value = option.getAttribute('data-price');
            });
        });
        
        // Handle order form submission
        orderForm.addEventListener('submit', (e) => {
            e.preventDefault();
            
            // Get form values
            const firstName = document.getElementById('firstName').value;
            const lastName = document.getElementById('lastName').value;
            const foodType = foodTypeInput.value;
            const foodPrice = parseInt(foodPriceInput.value);
            const phone = document.getElementById('phone').value;
            const address = document.getElementById('address').value;
            
            if (!foodType) {
                alert('Please select a food item');
                return;
            }
            
            // Create new order object
            const newOrder = {
                id: Date.now(),
                firstName,
                lastName,
                foodType,
                foodPrice,
                phone,
                address,
                timestamp: new Date().toLocaleString(),
                status: 'Pending'
            };
            
            // Add to orders array
            orders.push(newOrder);
            
            // Save to localStorage
            localStorage.setItem('briyaniOrders', JSON.stringify(orders));
            
            // Reload orders display
            loadOrders();
            
            // Reset form
            orderForm.reset();
            foodOptions.forEach(opt => opt.classList.remove('selected'));
            foodTypeInput.value = '';
            foodPriceInput.value = '';
            
            // Show success message
            alert(`Order placed successfully! Your total is TZS ${foodPrice.toLocaleString()}/=. Your food will be delivered to ${address}.`);
        });
        
        // Load and display orders
        function loadOrders() {
            // Customer view orders
            if (orders.length === 0) {
                ordersList.innerHTML = '<p class="no-orders">No orders placed yet. Be the first to order!</p>';
            } else {
                let ordersHTML = '';
                // Show only last 5 orders for customer view
                const recentOrders = orders.slice(-5).reverse();
                
                recentOrders.forEach(order => {
                    ordersHTML += `
                    <div class="order-item">
                        <div class="order-header">
                            <div class="customer-name">${order.firstName} ${order.lastName}</div>
                            <div class="order-time">${order.timestamp}</div>
                        </div>
                        <div class="order-details">
                            <div class="order-food">${order.foodType}</div>
                            <div class="order-price">TZS ${order.foodPrice.toLocaleString()}/=</div>
                        </div>
                        <div class="order-contact">
                            <div><i class="fas fa-phone"></i> ${order.phone}</div>
                            <div><i class="fas fa-map-marker-alt"></i> ${order.address.substring(0, 30)}${order.address.length > 30 ? '...' : ''}</div>
                        </div>
                    </div>
                    `;
                });
                
                ordersList.innerHTML = ordersHTML;
            }
            
            // Update admin stats
            updateAdminStats();
        }
        
        // Update admin statistics
        function updateAdminStats() {
            totalOrdersEl.textContent = orders.length;
            
            const totalRevenue = orders.reduce((sum, order) => sum + order.foodPrice, 0);
            totalRevenueEl.textContent = totalRevenue.toLocaleString();
            
            const pendingCount = orders.filter(order => order.status === 'Pending').length;
            pendingOrdersEl.textContent = pendingCount;
        }
        
        // Load admin orders
        function loadAdminOrders() {
            if (orders.length === 0) {
                adminOrdersList.innerHTML = '<p class="no-orders">No orders available.</p>';
            } else {
                let ordersHTML = '';
                // Show all orders for admin view (most recent first)
                const allOrders = [...orders].reverse();
                
                allOrders.forEach(order => {
                    ordersHTML += `
                    <div class="order-item">
                        <div class="order-header">
                            <div class="customer-name">${order.firstName} ${order.lastName} <span class="order-status">(${order.status})</span></div>
                            <div class="order-time">ID: ${order.id} | ${order.timestamp}</div>
                        </div>
                        <div class="order-details">
                            <div class="order-food">${order.foodType}</div>
                            <div class="order-price">TZS ${order.foodPrice.toLocaleString()}/=</div>
                        </div>
                        <div class="order-contact">
                            <div><i class="fas fa-phone"></i> ${order.phone}</div>
                            <div><i class="fas fa-map-marker-alt"></i> ${order.address}</div>
                        </div>
                        <div class="admin-actions">
                            <button onclick="updateOrderStatus(${order.id}, 'Completed')" class="status-btn complete">Mark as Completed</button>
                            <button onclick="updateOrderStatus(${order.id}, 'Cancelled')" class="status-btn cancel">Cancel Order</button>
                            <button onclick="deleteOrder(${order.id})" class="status-btn delete">Delete</button>
                        </div>
                    </div>
                    `;
                });
                
                adminOrdersList.innerHTML = ordersHTML;
            }
            
            updateAdminStats();
        }
        
        // Admin login
        loginAdminBtn.addEventListener('click', () => {
            const password = document.getElementById('adminPassword').value;
            
            // Simple password check
            if (password === 'admin123') {
                adminLoginForm.classList.add('hidden');
                adminDashboard.classList.remove('hidden');
                loadAdminOrders();
            } else {
                alert('Incorrect password. Please try again.');
            }
        });
        
        // Admin controls
        refreshOrdersBtn.addEventListener('click', () => {
            loadAdminOrders();
            alert('Orders refreshed successfully!');
        });
        
        clearAllOrdersBtn.addEventListener('click', () => {
            if (confirm('Are you sure you want to clear ALL orders? This action cannot be undone.')) {
                orders = [];
                localStorage.setItem('briyaniOrders', JSON.stringify(orders));
                loadAdminOrders();
                alert('All orders have been cleared.');
            }
        });
        
        exportOrdersBtn.addEventListener('click', () => {
            // Create a CSV string
            let csv = 'ID,First Name,Last Name,Food Type,Price (TZS),Phone,Address,Timestamp,Status\n';
            
            orders.forEach(order => {
                csv += `${order.id},${order.firstName},${order.lastName},${order.foodType},${order.foodPrice},${order.phone},"${order.address}",${order.timestamp},${order.status}\n`;
            });
            
            // Create a download link
            const blob = new Blob([csv], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.setAttribute('hidden', '');
            a.setAttribute('href', url);
            a.setAttribute('download', 'briyani_orders.csv');
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            
            alert('Orders exported successfully as CSV file!');
        });
        
        // Global functions for admin actions (called from inline onclick handlers)
        window.updateOrderStatus = function(orderId, newStatus) {
            const orderIndex = orders.findIndex(order => order.id === orderId);
            if (orderIndex !== -1) {
                orders[orderIndex].status = newStatus;
                localStorage.setItem('briyaniOrders', JSON.stringify(orders));
                loadAdminOrders();
                alert(`Order #${orderId} status updated to "${newStatus}"`);
            }
        };
        
        window.deleteOrder = function(orderId) {
            if (confirm('Are you sure you want to delete this order?')) {
                orders = orders.filter(order => order.id !== orderId);
                localStorage.setItem('briyaniOrders', JSON.stringify(orders));
                loadAdminOrders();
                alert(`Order #${orderId} has been deleted.`);
            }
        };
        
        // Initialize the page
        document.addEventListener('DOMContentLoaded', () => {
            // Load initial orders
            loadOrders();
            
            // Set customer view as active by default
            customerViewBtn.style.backgroundColor = 'white';
            customerViewBtn.style.color = '#ff7e5f';
        });
    </script>
</body>
</html>